<html>
    <head>
        <title>Self Tracker from My Phone</title>
    </head>
    <body>
        <div id="inputDivs"></div>

        <script>
            let inputs;
            let dates = [];
            let divNum = 0;
            
            /**
             * When the window loads, build the page
             */
            window.onload = function(e){
                getInputs();
            };

            function getInputs(){
                fetch('/api').then(result => {
                    return result.json();
                }).then(result => {
                    //console.log(result);
                    inputs = result;

                    for(let i = 0; i < inputs.length; i++){
                        // let div = document.createElement('div');
                        // if(inputs[i].date){
                        //     let thisDateArray = inputs[i].date.split(' ');
                        //     let thisDate = thisDateArray[0] + "-" + thisDateArray[1] + "-" + thisDateArray[2];
                        //     if(indexOf(thisDate) < 0){
                        //         dates.push(thisDate);
                        //     }
                        // }
                        // div.id = divNum;
                        // document.getElementById('inputDivs').appendChild(div);

                        baseToImage(inputs[i]);

                        //divNum++;
                    }
                }).catch(err => {
                    return err;
                })
            }

            function baseToImage(bString){
                let img = document.createElement('img');
                img.width = 320;
                img.height = 240;
                img.src = "data:image/jpeg;base64," + bString;
                document.body.appendChild(img);
            }

            function baseToImage(input){
                let bString = input.img;
                let img = document.createElement('img');
                img.width = 320;
                img.height = 240;
                img.src = "data:image/jpeg;base64," + bString;
                document.body.appendChild(img);
                //
                // let imgdate = input.imgDate;
                // let newDate = document.createElement('p');
                // newDate.addAttribute('class', 'date');
                // newDate.innerHTML = imgdate;
                // document.body.appendChild(imgdate);
                //
                // let imgloc = input.imgLoc;
                // let newloc = document.createElement('p');
                // newloc.addAttribute('class', 'loc');
                // newloc.innerHTML = imgloc;
                // document.body.appendChild(imgloc);
            }

        </script>
    </body>
</html>